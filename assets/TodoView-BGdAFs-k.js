import{r as i,b as T,c as v,a as o,w as r,d,v as p,t,o as g}from"./index-CjxKfy8a.js";import{a as k}from"./index-NIGUFBhG.js";const V={class:"middleToDo"},$={key:0},c={key:1},m="https://todolist-api.hexschool.io/",D={__name:"TodoView",setup(I){const s=i({email:"",password:"",nickname:""}),y=i(""),b=async()=>{console.log(`${m}users/sign_up`);try{const e=await k.post(`${m}users/sign_up`,s.value);console.log(e),y.value=e.data.uid}catch(e){console.log("註冊錯誤!!"),console.log(e)}},u=i({email:"",password:""}),w=i(""),x=async()=>{console.log(`${m}users/sign_In`);try{const e=await k.post(`${m}users/sign_In`,u.value);console.log(e),w.value=e.data.token,document.cookie=`customTodoToken = ${e.data.token};path=/`}catch(e){console.log("登入錯誤!!"),console.log(e)}},a=i({nickname:"",uid:""});return T(async()=>{const e=document.cookie.replace(/(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$/i,"$1"),l=await k.get(`${m}users/checkout`,{headers:{Authorization:e}});console.log(l),a.value=l.data}),(e,l)=>(g(),v("div",V,[l[5]||(l[5]=o("h1",null,"待辦",-1)),l[6]||(l[6]=o("h2",null,"註冊功能",-1)),r(o("input",{type:"email",placeholder:"輸入Email","onUpdate:modelValue":l[0]||(l[0]=n=>s.value.email=n)},null,512),[[p,s.value.email]]),r(o("input",{type:"text",placeholder:"輸入密碼","onUpdate:modelValue":l[1]||(l[1]=n=>s.value.password=n)},null,512),[[p,s.value.password]]),r(o("input",{type:"text",placeholder:"輸入暱稱","onUpdate:modelValue":l[2]||(l[2]=n=>s.value.nickname=n)},null,512),[[p,s.value.nickname]]),l[7]||(l[7]=o("br",null,null,-1)),d(" "+t(s.value)+" ",1),l[8]||(l[8]=o("br",null,null,-1)),o("button",{type:"button",onClick:b},"註冊"),l[9]||(l[9]=o("br",null,null,-1)),d(" UID號碼："+t(y.value)+" ",1),l[10]||(l[10]=o("h2",null,"登入功能",-1)),r(o("input",{type:"email",placeholder:"輸入Email","onUpdate:modelValue":l[3]||(l[3]=n=>u.value.email=n)},null,512),[[p,u.value.email]]),r(o("input",{type:"text",placeholder:"輸入密碼","onUpdate:modelValue":l[4]||(l[4]=n=>u.value.password=n)},null,512),[[p,u.value.password]]),l[11]||(l[11]=o("br",null,null,-1)),d(" "+t(u.value)+" ",1),l[12]||(l[12]=o("br",null,null,-1)),o("button",{type:"button",onClick:x},"登入"),l[13]||(l[13]=o("br",null,null,-1)),d(" token號碼："+t(w.value)+" ",1),l[14]||(l[14]=o("h2",null,"驗證功能",-1)),d(" "+t(a.value)+" ",1),a.value.uid?(g(),v("div",$,[o("p",null,"UID : "+t(a.value.uid),1),o("p",null,"NickName:"+t(a.value.nickname),1)])):(g(),v("div",c," 你還沒有登入 "))]))}};export{D as default};
